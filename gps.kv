#:import MapView kivy.garden.mapview.MapView

TabbedPanel:
    do_default_tab: False
    map_view: map_view
    name_input_text: name_input.text

    male_search_status: male_search.state
    female_search_status: female_search.state
    japanese_search_status: japanese_search.active
    english_search_status: english_search.active
    chinese_search_status: chinese_search.active
    korean_search_status: korean_search.active
    interval_slider: interval_slider

    need_help_check_status: need_help_check.state
    male_check_status: male_check.state
    female_check_status: female_check.state
    japanese_check_status: japanese_check.active
    english_check_status: english_check.active
    chinese_check_status: chinese_check.active
    korean_check_status: korean_check.active
    comment_input_text: comment_input.text

    register_tab: register_tab
    TabbedPanelItem:
        id: register_tab
        text: 'my info'
        # Label:
        #     text_size: self.size
        #     halign: 'center'
        #     valign: 'center'
        #     text: "under construction"
        BoxLayout:
            orientation: "vertical"
            BoxLayout:
                size_hint: (1, 0.9)
                orientation: "horizontal"
                GridLayout:
                    size_hint: (0.2, 1)
                    cols: 1
                    Label:
                        text: 'mode'
                    Label:
                        text: 'name'
                    Label:
                        text: 'gender'
                    Label:
                        text: 'language'
                    Label:
                        text: 'comment'
                    Label:
                        text: 'update\ninterval(sec)'
                GridLayout:
                    size_hint: (0.8, 1)
                    cols: 1
                    GridLayout:
                        cols: 2
                        ToggleButton:
                            id: let_help_check
                            text: "help you"
                            group: "mode"
                            state: app.let_help_check_status
                        ToggleButton:
                            id: need_help_check
                            text: "help me"
                            group: "mode"
                            state: app.need_help_check_status

                    MyTextInput:
                        max_characters: 10
                        multiline: False
                        id: name_input
                        text: app.name_input_text
                    GridLayout:
                        cols: 2
                        ToggleButton:
                            id: male_check
                            text: "Male"
                            group: "gender"
                            state: app.male_check_status
                        ToggleButton:
                            id: female_check
                            text: "Female"
                            group: "gender"
                            state: app.female_check_status

                    GridLayout:
                        cols: 8
                        CheckBox:
                            id: japanese_check
                            active: app.japanese_check_status
                        Image:
                            source: 'flag093.png'
                        CheckBox:
                            id: english_check
                            active: app.english_check_status
                        Image:
                            source: 'flag198.png'
                        CheckBox:
                            id: chinese_check
                            active: app.chinese_check_status
                        Image:
                            source: 'flag039.png'
                        CheckBox:
                            id: korean_check
                            active: app.korean_check_status
                        Image:
                            source: 'flag099.png'
                    MyTextInput:
                        max_characters: 20
                        multiline: False
                        id: comment_input
                        text: app.comment_input_text
                    GridLayout:
                        cols: 2
                        Slider:
                            id: interval_slider
                            min: 30
                            max: 180
                            value: app.update_interval
                            step: 10
                            on_touch_move: app.update_interval_label = str(self.value)
                        Label:
                            size: (50, 1)
                            size_hint: (None, 1)
                            text: app.update_interval_label
                            on_text: interval_slider.value = int(self.text)
            BoxLayout:
                size_hint: (1, 0.1)
                oriental: "vertical"
                Button:
                    text: "REGISTER"
                    on_release: app.name_check()
                    # on_release: app.rest_update()
                    # on_release: app.name_print()

    TabbedPanelItem:
        text: 'map'
        BoxLayout:
            orientation: "vertical"

            GridLayout:
                size_hint: (1, 0.9)
                cols: 1
                MapView:
                    id: map_view
                    lat: app.lat
                    lon: app.lon
                    zoom: 12
                
            GridLayout:
                size_hint: (1, 0.1)
                cols: 1
                Button:
                    text: 'CURRENT PLACE'
                    on_release: app.current_place()
                    
            # GridLayout:
            #     size_hint: (1, 0.1)
            #     cols: 3
            #     Button:
            #         text: 'MARK'
            #         on_release: app.put_marker()
                    
            #     Button:
            #         text: 'UPDATE'
            #         on_release: app.rest_update()
                    
            #     Button:
            #         text: 'CLEAR'
            #         on_release: app.set_status()

    TabbedPanelItem:
        text: 'search'
        BoxLayout:
            orientation: "vertical"
            BoxLayout:
                size_hint: (1, 0.9)
                orientation: "horizontal"
                GridLayout:
                    size_hint: (0.2, 1)
                    cols: 1
                    Label:
                        text: 'gender'
                    Label:
                        text: 'language'
                    Label:
                        text: 'update\ninterval(sec)'
                GridLayout:
                    size_hint: (0.8, 1)
                    cols: 1
                    GridLayout:
                        cols: 2
                        ToggleButton:
                            id: male_search
                            text: "Male"
                            group: "gender"
                            state: app.male_search_status
                        ToggleButton:
                            id: female_search
                            text: "Female"
                            group: "gender"
                            state: app.female_search_status

                    GridLayout:
                        cols: 8
                        CheckBox:
                            id: japanese_search
                            active: app.japanese_search_status
                        Image:
                            source: 'flag093.png'
                        CheckBox:
                            id: english_search
                            active: app.english_search_status
                        Image:
                            source: 'flag198.png'
                        CheckBox:
                            id: chinese_search
                            active: app.chinese_search_status
                        Image:
                            source: 'flag039.png'
                        CheckBox:
                            id: korean_search
                            active: app.korean_search_status
                        Image:
                            source: 'flag099.png'
                    GridLayout:
                        cols: 2
                        Slider:
                            id: interval_slider
                            min: 30
                            max: 180
                            value: app.update_interval
                            step: 10
                            on_touch_move: app.update_interval_label = str(self.value)
                        Label:
                            size: (50, 1)
                            size_hint: (None, 1)
                            text: app.update_interval_label
                            on_text: interval_slider.value = int(self.text)
            Button:
                size_hint: (1, 0.1)
                text: 'update'
                on_release: app.change_interval()
                on_release: app.switch_map_tab()
